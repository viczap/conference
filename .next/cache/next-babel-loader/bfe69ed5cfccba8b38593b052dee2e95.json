{"ast":null,"code":"import _regeneratorRuntime from \"@babel/runtime/regenerator\";\nimport _defineProperty from \"@babel/runtime/helpers/esm/defineProperty\";\nimport _asyncToGenerator from \"@babel/runtime/helpers/esm/asyncToGenerator\";\nimport { createElement as _createElement } from \"react\";\nimport { jsxDEV as _jsxDEV } from \"react/jsx-dev-runtime\";\n\nvar _jsxFileName = \"/Users/victorzapata/projects/personal/react/conference/components/Speakers/index.jsx\",\n    _this = this,\n    _s = $RefreshSig$();\n\nfunction ownKeys(object, enumerableOnly) { var keys = Object.keys(object); if (Object.getOwnPropertySymbols) { var symbols = Object.getOwnPropertySymbols(object); if (enumerableOnly) symbols = symbols.filter(function (sym) { return Object.getOwnPropertyDescriptor(object, sym).enumerable; }); keys.push.apply(keys, symbols); } return keys; }\n\nfunction _objectSpread(target) { for (var i = 1; i < arguments.length; i++) { var source = arguments[i] != null ? arguments[i] : {}; if (i % 2) { ownKeys(Object(source), true).forEach(function (key) { _defineProperty(target, key, source[key]); }); } else if (Object.getOwnPropertyDescriptors) { Object.defineProperties(target, Object.getOwnPropertyDescriptors(source)); } else { ownKeys(Object(source)).forEach(function (key) { Object.defineProperty(target, key, Object.getOwnPropertyDescriptor(source, key)); }); } } return target; }\n\nimport axios from \"axios\";\nimport { useEffect, useReducer, useState } from \"react\";\nimport Speaker from \"../Speaker\";\nimport SpeakerSearchBar from \"../SpeakerSearchBar\";\nimport { REQUEST_STATUS, requestReducer } from \"../../reducers/request\";\nimport { GET_ALL_SUCCESS, GET_ALL_FAILURE, PUT_FAILURE, PUT_SUCCESS, UPDATE_STATUS } from \"../../actions/request\";\n\nvar Speakers = function Speakers() {\n  _s();\n\n  var onFavoriteToggleHandler = /*#__PURE__*/function () {\n    var _ref = _asyncToGenerator( /*#__PURE__*/_regeneratorRuntime.mark(function _callee(speaker) {\n      var toggleFavSpeaker;\n      return _regeneratorRuntime.wrap(function _callee$(_context) {\n        while (1) {\n          switch (_context.prev = _context.next) {\n            case 0:\n              _context.prev = 0;\n              toggleFavSpeaker = _objectSpread(_objectSpread({}, speaker), {}, {\n                isFavorite: !speaker.isFavorite\n              });\n              _context.next = 4;\n              return axios.put(\"http://localhost:4000/speakers/\".concat(speaker.id), toggleFavSpeaker);\n\n            case 4:\n              dispatch({\n                type: PUT_SUCCESS,\n                record: toggleFavSpeaker\n              });\n              _context.next = 10;\n              break;\n\n            case 7:\n              _context.prev = 7;\n              _context.t0 = _context[\"catch\"](0);\n              dispatch({\n                type: PUT_SUCCESS,\n                error: _context.t0\n              });\n\n            case 10:\n            case \"end\":\n              return _context.stop();\n          }\n        }\n      }, _callee, null, [[0, 7]]);\n    }));\n\n    return function onFavoriteToggleHandler(_x) {\n      return _ref.apply(this, arguments);\n    };\n  }();\n\n  var _useReducer = useReducer(requestReducer, {\n    records: [],\n    status: REQUEST_STATUS.LOADING,\n    error: null\n  }),\n      _useReducer$ = _useReducer[0],\n      speakers = _useReducer$.records,\n      status = _useReducer$.status,\n      error = _useReducer$.error,\n      dispatch = _useReducer[1];\n\n  useEffect(function () {\n    var fetchData = /*#__PURE__*/function () {\n      var _ref2 = _asyncToGenerator( /*#__PURE__*/_regeneratorRuntime.mark(function _callee2() {\n        var response;\n        return _regeneratorRuntime.wrap(function _callee2$(_context2) {\n          while (1) {\n            switch (_context2.prev = _context2.next) {\n              case 0:\n                _context2.prev = 0;\n                _context2.next = 3;\n                return axios.get(\"http://localhost:4000/speakers\");\n\n              case 3:\n                response = _context2.sent;\n                dispatch({\n                  records: response.data,\n                  type: GET_ALL_SUCCESS\n                });\n                _context2.next = 10;\n                break;\n\n              case 7:\n                _context2.prev = 7;\n                _context2.t0 = _context2[\"catch\"](0);\n                dispatch({\n                  type: GET_ALL_FAILURE,\n                  error: _context2.t0\n                });\n\n              case 10:\n              case \"end\":\n                return _context2.stop();\n            }\n          }\n        }, _callee2, null, [[0, 7]]);\n      }));\n\n      return function fetchData() {\n        return _ref2.apply(this, arguments);\n      };\n    }();\n\n    fetchData();\n  }, []);\n\n  var _useState = useState(\"\"),\n      searchQuery = _useState[0],\n      setSearchQuery = _useState[1];\n\n  var isSuccess = status === REQUEST_STATUS.SUCCESS;\n  var isError = status === REQUEST_STATUS.ERROR;\n  var isLoading = status === REQUEST_STATUS.LOADING;\n  return /*#__PURE__*/_jsxDEV(\"div\", {\n    children: [/*#__PURE__*/_jsxDEV(SpeakerSearchBar, {\n      searchQuery: searchQuery,\n      setSearchQuery: setSearchQuery\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 75,\n      columnNumber: 13\n    }, _this), isLoading && /*#__PURE__*/_jsxDEV(\"div\", {\n      children: \"Loading...\"\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 80,\n      columnNumber: 27\n    }, _this), isError && /*#__PURE__*/_jsxDEV(\"div\", {\n      children: [\"There's an error! Message: \", error.message, \" \"]\n    }, void 0, true, {\n      fileName: _jsxFileName,\n      lineNumber: 81,\n      columnNumber: 25\n    }, _this), isSuccess && /*#__PURE__*/_jsxDEV(\"div\", {\n      className: \"grid md:grid-cols-2 lg:grid-cols-3 grid-cols-1 gap-12\",\n      children: speakers.filter(function (speaker) {\n        var targetStr = \"\".concat(speaker.firstName, \" \").concat(speaker.lastName).toLowerCase();\n        return searchQuery.length === 0 ? true : targetStr.includes(searchQuery.toLowerCase());\n      }).map(function (speaker) {\n        return /*#__PURE__*/_createElement(Speaker, _objectSpread(_objectSpread({}, speaker), {}, {\n          key: speaker.id,\n          onFavoriteToggle: function onFavoriteToggle() {\n            return onFavoriteToggleHandler(speaker);\n          },\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 92,\n            columnNumber: 29\n          },\n          __self: _this\n        }));\n      })\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 83,\n      columnNumber: 17\n    }, _this)]\n  }, void 0, true, {\n    fileName: _jsxFileName,\n    lineNumber: 74,\n    columnNumber: 9\n  }, _this);\n};\n\n_s(Speakers, \"2ZXfhp8D2Q1dRknaGjL+MAw8Po4=\");\n\n_c = Speakers;\nexport default Speakers;\n\nvar _c;\n\n$RefreshReg$(_c, \"Speakers\");","map":{"version":3,"sources":["/Users/victorzapata/projects/personal/react/conference/components/Speakers/index.jsx"],"names":["axios","useEffect","useReducer","useState","Speaker","SpeakerSearchBar","REQUEST_STATUS","requestReducer","GET_ALL_SUCCESS","GET_ALL_FAILURE","PUT_FAILURE","PUT_SUCCESS","UPDATE_STATUS","Speakers","onFavoriteToggleHandler","speaker","toggleFavSpeaker","isFavorite","put","id","dispatch","type","record","error","records","status","LOADING","speakers","fetchData","get","response","data","searchQuery","setSearchQuery","isSuccess","SUCCESS","isError","ERROR","isLoading","message","filter","targetStr","firstName","lastName","toLowerCase","length","includes","map"],"mappings":"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","sourcesContent":["import axios from \"axios\";\nimport { useEffect, useReducer, useState } from \"react\";\nimport Speaker from \"../Speaker\";\nimport SpeakerSearchBar from \"../SpeakerSearchBar\";\n\nimport { REQUEST_STATUS, requestReducer } from \"../../reducers/request\";\n\nimport {\n    GET_ALL_SUCCESS,\n    GET_ALL_FAILURE,\n    PUT_FAILURE,\n    PUT_SUCCESS,\n    UPDATE_STATUS,\n} from \"../../actions/request\";\n\nconst Speakers = () => {\n    const onFavoriteToggleHandler = async (speaker) => {\n        try {\n            const toggleFavSpeaker = {\n                ...speaker,\n                isFavorite: !speaker.isFavorite,\n            };\n\n            await axios.put(\n                `http://localhost:4000/speakers/${speaker.id}`,\n                toggleFavSpeaker\n            );\n\n            dispatch({\n                type: PUT_SUCCESS,\n                record: toggleFavSpeaker,\n            });\n        } catch (e) {\n            dispatch({\n                type: PUT_SUCCESS,\n                error: e,\n            });\n        }\n    };\n\n    const [{ records: speakers, status, error }, dispatch] = useReducer(\n        requestReducer,\n        {\n            records: [],\n            status: REQUEST_STATUS.LOADING,\n            error: null,\n        }\n    );\n\n    useEffect(() => {\n        const fetchData = async () => {\n            try {\n                const response = await axios.get(\n                    \"http://localhost:4000/speakers\"\n                );\n                dispatch({ records: response.data, type: GET_ALL_SUCCESS });\n            } catch (e) {\n                dispatch({\n                    type: GET_ALL_FAILURE,\n                    error: e,\n                });\n            }\n        };\n        fetchData();\n    }, []);\n\n    const [searchQuery, setSearchQuery] = useState(\"\");\n\n    const isSuccess = status === REQUEST_STATUS.SUCCESS;\n    const isError = status === REQUEST_STATUS.ERROR;\n    const isLoading = status === REQUEST_STATUS.LOADING;\n\n    return (\n        <div>\n            <SpeakerSearchBar\n                searchQuery={searchQuery}\n                setSearchQuery={setSearchQuery}\n            />\n\n            {isLoading && <div>Loading...</div>}\n            {isError && <div>There's an error! Message: {error.message} </div>}\n            {isSuccess && (\n                <div className=\"grid md:grid-cols-2 lg:grid-cols-3 grid-cols-1 gap-12\">\n                    {speakers\n                        .filter((speaker) => {\n                            const targetStr = `${speaker.firstName} ${speaker.lastName}`.toLowerCase();\n                            return searchQuery.length === 0\n                                ? true\n                                : targetStr.includes(searchQuery.toLowerCase());\n                        })\n                        .map((speaker) => (\n                            <Speaker\n                                {...speaker}\n                                key={speaker.id}\n                                onFavoriteToggle={() =>\n                                    onFavoriteToggleHandler(speaker)\n                                }\n                            />\n                        ))}\n                </div>\n            )}\n        </div>\n    );\n};\n\nexport default Speakers;\n"]},"metadata":{},"sourceType":"module"}